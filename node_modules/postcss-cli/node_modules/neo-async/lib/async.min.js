(function(){function x(b){for(var d=Object.keys(b),a=-1,c=d.length,e=Array(c);++a<c;)e[a]=b[d[a]];return e}function F(b){for(var d=-1,a=b.length,c=Array(a);++d<a;)c[d]=b[d];return c}function y(b,d){var a=-1,c=b.length-d;if(0>=c)return[];for(var e=Array(c);++a<c;)e[a]=b[a+d];return e}function qa(b){for(var d=-1,a=b.length,c=Array(a);++d<a;)c[a-d-1]=b[d];return c}function t(b,d){for(var a=-1,c=b.length;++a<c;)d(b[a],a);return b}function I(b,d){for(var a=b.length;a--;)d(b[a],a);return b}function u(b,
d,a){a=a||Object.keys(b);for(var c=-1,e=a.length;++c<e;){var g=a[c];d(b[g],g)}return b}function z(b,d){for(var a=-1;++a<b;)d(a)}function ra(b,d){for(var a=b.length,c=-1;++c<a;)if(!d(b[c]))return!1;return!0}function A(b){for(var d=b.length,a=-1,c=Array(d);++a<d;)c[a]=b[a];return c}function B(b){for(var d=Object.keys(b),a=d.length,c=-1,e={};++c<a;){var g=d[c];e[g]=b[g]}return e}function W(b,d){for(var a=-1,c=b.length,e=Array(c);++a<c;)e[a]=(b[a]||{})[d];return e}function w(b){var d=!1;return function(a,
c){if(d){if(a)return b(a,c);throw Error("Callback was already called.");}d=!0;b(a,c)}}function J(b,d,a,c){function e(b){k(b,w(g))}function g(b,c){b?(a(b),a=l):!1===c?(a(),a=l):++h===f&&(a(),a=l)}a=a||l;var f,h=0,k=c?d.bind(c):d;if(Array.isArray(b)){f=b.length;if(!f)return a();t(b,e)}else if(b&&"object"===typeof b){d=Object.keys(b);f=d.length;if(!f)return a();u(b,e,d)}else a()}function K(b,d,a,c){function e(b,c){if(h)throw Error("Callback was already called.");h=!0;if(b)return a(b);if(++k===g||!1===
c)return a();f()}a=a||l;var g,f,h,k=0,m=c?d.bind(c):d;if(Array.isArray(b)){g=b.length;if(!g)return a();f=function(){h=!1;m(b[k],e)}}else if(b&&"object"===typeof b){var n=Object.keys(b);g=n.length;if(!g)return a();f=function(){h=!1;m(b[n[k]],e)}}else return a();f()}function X(b,d,a,c,e){function g(b,a){b?(c(b),c=l):++m===f?(c(),c=l):!1===a?(c(),c=l):h()}c=c||l;if(isNaN(d)||1>d)return c();var f,h,k=0,m=0,n=e?a.bind(e):a;if(Array.isArray(b)){f=b.length;if(!f)return c();h=function(){var a=k++;a>=f||n(b[a],
w(g))}}else if(b&&"object"===typeof b){var p=Object.keys(b);f=p.length;if(!f)return c();h=function(){var a=k++;a>=f||n(b[p[a]],w(g))}}else return c();z(d>f?f:d,h)}function Y(b,d,a,c){function e(b){n(b,g(k++))}function g(b){var c=!1;return function(d,e){if(c)throw Error("Callback was already called.");c=!0;h[b]=e;d?(a(d,A(h)),a=l):++m===f&&(a(void 0,h),a=l)}}a=a||l;var f,h,k=0,m=0,n=c?d.bind(c):d;if(Array.isArray(b)){f=b.length;if(!f)return a(void 0,[]);h=Array(f);t(b,e)}else if(b&&"object"===typeof b){d=
Object.keys(b);f=d.length;if(!f)return a(void 0,[]);h=Array(f);u(b,e,d)}else a(void 0,[])}function aa(b,d,a,c){function e(b){var c=!1;return function(d,e){if(c)throw Error("Callback was already called.");c=!0;f[b]=e;d?(a(d,A(f)),a=l):++k===g?(a(void 0,f),a=l):h()}}a=a||l;var g,f,h,k=0,m=c?d.bind(c):d;if(Array.isArray(b)){g=b.length;if(!g)return a(void 0,[]);h=function(){m(b[k],e(k))}}else if(b&&"object"===typeof b){var n=Object.keys(b);g=n.length;if(!g)return a(void 0,[]);h=function(){m(b[n[k]],e(k))}}else return a(void 0,
[]);f=Array(g);h()}function ba(b,d,a,c,e){function g(b){var a=!1;return function(d,e){if(a)throw Error("Callback was already called.");a=!0;h[b]=e;d?(c(d,A(h)),c=l):++n===f?(c(void 0,h),c=l):k()}}c=c||l;if(isNaN(d)||1>d)return c(void 0,[]);var f,h,k,m=0,n=0,p=e?a.bind(e):a;if(Array.isArray(b)){f=b.length;if(!f)return c(void 0,[]);k=function(){var a=m++;a>=f||p(b[a],g(a))}}else if(b&&"object"===typeof b){var q=Object.keys(b);f=q.length;if(!f)return c(void 0,[]);k=function(){var a=m++;a>=f||p(b[q[a]],
g(a))}}else return c(void 0,[]);h=Array(f);z(d>f?f:d,k)}function ca(b,d,a,c){b&&"object"===typeof b&&(b=x(b));L(b,d,a,c)}function da(b,d,a,c){b&&"object"===typeof b&&(b=x(b));M(b,d,a,c)}function ea(b,d,a,c,e){b&&"object"===typeof b&&(b=x(b));N(b,d,a,c,e)}function O(b,d,a,c,e){function g(b){m(b,k(b))}a=a||l;var f,h=0,k=function(){function b(c){return function(b){b?++h===f&&(a(),a=l):(a(c),a=l)}}function c(b){return function(c){c?(a(b),a=l):++h===f&&(a(),a=l)}}return e?b:c}(),m=c?d.bind(c):d;if(Array.isArray(b)){f=
b.length;if(!f)return a();t(b,g)}else if(b&&"object"===typeof b){d=Object.keys(b);f=d.length;if(!f)return a();u(b,g,d)}else a()}function P(b,d,a,c,e){a=a||l;var g,f,h,k=0,m=function(){function b(c){return function(b){if(h)throw Error("Callback was already called.");h=!0;if(!b)return a(c);if(++k===g)return a();f()}}function c(b){return function(c){if(h)throw Error("Callback was already called.");h=!0;if(c)return a(b);if(++k===g)return a();f()}}return e?b:c}(),n=c?d.bind(c):d;if(Array.isArray(b)){g=
b.length;if(!g)return a();f=function(){h=!1;var a=b[k];n(a,m(a))}}else if(b&&"object"===typeof b){var p=Object.keys(b);g=p.length;if(!g)return a();f=function(){h=!1;var a=b[p[k]];n(a,m(a))}}else return a();f()}function Q(b,d,a,c,e,g){c=c||l;if(isNaN(d)||1>d)return c();var f,h,k=0,m=0,n=function(){function b(a){return function(b){b?++m===f?(c(),c=l):h():(c(a),c=l)}}function a(b){return function(a){a?(c(b),c=l):++m===f?(c(),c=l):h()}}return g?b:a}(),p=e?a.bind(e):a;if(Array.isArray(b)){f=b.length;if(!f)return c();
h=function(){var a=k++;a>=f||(a=b[a],p(a,w(n(a))))}}else if(b&&"object"===typeof b){var q=Object.keys(b);f=q.length;if(!f)return c();h=function(){var a=k++;a>=f||(a=b[q[a]],p(a,w(n(a))))}}else return c();z(d>f?f:d,h)}function L(b,d,a,c,e){function g(b,a){p(b,n(a,b))}a=a||l;var f,h=Array.isArray(b),k={},m=0,n=function(){function b(c,d){var e=!1;return function(b){if(e)throw Error("Callback was already called.");e=!0;b||(k[c+""]=d);++m===f&&a(h?x(k):k)}}function c(b,d){var e=!1;return function(c){if(e)throw Error("Callback was already called.");
e=!0;c&&(k[b+""]=d);++m===f&&a(h?x(k):k)}}return e?b:c}(),p=c?d.bind(c):d;if(h){f=b.length;if(!f)return a([]);t(b,g)}else if(b&&"object"===typeof b){d=Object.keys(b);f=d.length;if(!f)return a({});u(b,g,d)}else a([])}function M(b,d,a,c,e){a=a||l;var g,f,h=Array.isArray(b),k={},m=0,n=function(){function b(c,d){var e=!1;return function(b){if(e)throw Error("Callback was already called.");e=!0;b||(k[c+""]=d);if(++m===g)return a(h?x(k):k);f()}}function c(b,d){var e=!1;return function(c){if(e)throw Error("Callback was already called.");
e=!0;c&&(k[b+""]=d);if(++m===g)return a(h?x(k):k);f()}}return e?b:c}(),p=c?d.bind(c):d;if(h){g=b.length;if(!g)return a([]);f=function(){var a=b[m];p(a,n(m,a))}}else if(b&&"object"===typeof b){var q=Object.keys(b);g=q.length;if(!g)return a({});f=function(){var a=q[m],c=b[a];p(c,n(a,c))}}else return a([]);f()}function N(b,d,a,c,e,g){c=c||l;if(isNaN(d)||1>d)return c([]);var f,h,k=Array.isArray(b),m={},n=0,p=0,q=function(){function b(a,d){var e=!1;return function(b){if(e)throw Error("Callback was already called.");
e=!0;b||(m[a+""]=d);if(++p===f)return c(k?x(m):m);h()}}function a(b,d){var e=!1;return function(a){if(e)throw Error("Callback was already called.");e=!0;a&&(m[b+""]=d);if(++p===f)return c(k?x(m):m);h()}}return g?b:a}(),C=e?a.bind(e):a;if(k){f=b.length;if(!f)return c([]);h=function(){var a=n++;if(!(a>=f)){var c=b[a];C(c,q(a,c))}}}else if(b&&"object"===typeof b){var Z=Object.keys(b);f=Z.length;if(!f)return c({});h=function(){var a=n++;if(!(a>=f)){var a=Z[a],c=b[a];C(c,q(a,c))}}}else return c([]);z(d>
f?f:d,h)}function G(b,d,a,c,e){function g(b,a){if(k)throw Error("Callback was already called.");k=!0;if(b)return c(b);if(++m===f)return c(void 0,a);h(a)}c=c||l;var f,h,k,m=0,n=e?a.bind(e):a;if(Array.isArray(b)){f=b.length;if(!f)return c(void 0,d);h=function(a){k=!1;n(a,b[m],g)}}else if(b&&"object"===typeof b){var p=Object.keys(b);f=p.length;if(!f)return c(void 0,d);h=function(a){k=!1;n(a,b[p[m]],g)}}else return c(void 0,d);h(d)}function fa(b,d,a,c,e){function g(b,a){if(k)throw Error("Callback was already called.");
k=!0;if(b)return c(b);if(++m===f)return c(void 0,a);h(a)}c=c||l;var f,h,k,m=0,n=e?a.bind(e):a;if(Array.isArray(b)){f=b.length;if(!f)return c(void 0,d);h=function(a){k=!1;n(a,b[f-m-1],g)}}else if(b&&"object"===typeof b){var p=Object.keys(b);f=p.length;if(!f)return c(void 0,d);h=function(a){k=!1;n(a,b[p[f-m-1]],g)}}else return c(void 0,d);h(d)}function R(b){function d(b,a,d,k){a=c(a,k);aa(b,a,e(d))}function a(b,a,d,k,m){d=c(d,m);ba(b,a,d,e(k))}function c(b,a){var c=a?b.bind(a):b;return function(b,a){c(b,
function(c,d){c?(a(c),a=l):a(void 0,{item:b,criteria:d})})}}function e(b){return function(a,c){if(a)b(a),b=l;else{var d=c.sort(function(b,a){return a.criteria<b.criteria});b(void 0,W(d,"item"))}}}switch(b){case "series":return d;case "limit":return a;default:return function(b,a,d,k){a=c(a,k);Y(b,a,e(d))}}}function ga(b,d,a,c){O(b,d,function(b){a=a||l;a(!!b)},c)}function ha(b,d,a,c){O(b,d,function(b){a=a||l;a(!b)},c,!0)}function ia(b,d,a){function c(b){var a=!1;return function(c,h){if(a)throw Error("Callback was already called.");
a=!0;if(c)d(c,g),d=l;else{var q=y(arguments,1);g[b]=1>=q.length?h:q;++f===e&&(d(void 0,g),d=l)}}}d=d||l;var e,g,f=0;if(Array.isArray(b)){e=b.length;if(!e)return d(void 0,[]);g=Array(e);a?t(b,function(b,d){b.call(a,c(d))}):t(b,function(b,a){b(c(a))})}else if(b&&"object"===typeof b){var h=Object.keys(b);e=h.length;if(!e)return d(void 0,{});g={};a?u(b,function(b,d){b.call(a,c(d))},h):u(b,function(b,a){b(c(a))},h)}else d()}function ja(b,d,a){function c(b){var a=!1;return function(c,k){if(a)throw Error("Callback was already called.");
a=!0;if(c)return d(c,g);var l=y(arguments,1);g[b]=1>=l.length?k:l;if(++h===e)return d(void 0,g);f()}}d=d||l;var e,g,f,h=0;if(Array.isArray(b)){e=b.length;if(!e)return d(void 0,[]);g=Array(e);f=a?function(){b[h].call(a,c(h))}:function(){b[h](c(h))}}else if(b&&"object"===typeof b){var k=Object.keys(b);e=k.length;if(!e)return d(void 0,{});g={};f=a?function(){var d=k[h];b[d].call(a,c(d))}:function(){var a=k[h];b[a](c(a))}}else return d();f()}function S(b,d,a,c){function e(b){var c=!1;return function(d,
e){if(c)throw Error("Callback was already called.");c=!0;if(d)a(d,f),a=l;else{var k=y(arguments,1);f[b]=1>=k.length?e:k;if(++m===g)return a(void 0,f);h()}}}a=a||l;var g,f,h,k=0,m=0;if(Array.isArray(b)){g=b.length;if(!g)return a(void 0,[]);f=Array(g);h=c?function(){var a=k++;a>=g||b[a].call(c,e(a))}:function(){var a=k++;if(!(a>=g))b[a](e(a))}}else if(b&&"object"===typeof b){var n=Object.keys(b);g=n.length;if(!g)return a(void 0,{});f={};h=c?function(){var a=k++;a>=g||(a=n[a],b[a].call(c,e(a)))}:function(){var a=
k++;a>=g||(a=n[a],b[a](e(a)))}}else return a();z(d>g?g:d,h)}function ka(){var b=arguments;return function(){var d=this,a=F(arguments),c=a.pop();G(b,a,function(b,a,c){b.push(function(b){var a=y(arguments,1);c(b,a)});a.apply(d,b)},function(b,a){a=Array.isArray(a)?a:[a];a.unshift(b);c.apply(d,a)})}}function la(b){var d="series"===b?K:J;return function(a){var b=function(){var b=this,c=F(arguments),e=c.pop()||l;return d(a,function(a,d){a.apply(b,c.concat(d))},e)};if(1<arguments.length){var e=y(arguments,
1);return b.apply(this,e)}return b}}function ma(b,d,a){function c(a,b,c){e.started=!0;var d=Array.isArray(a)?a:[a];void 0!==a&&d.length?(c="function"===typeof c?c:l,t(d,function(a){e.tasks.push({task:a,priority:b,callback:c});e.tasks=e.tasks.sort(function(a,b){return b.priority<a.priority});"function"===typeof e.saturated&&e.length()===e.concurrency&&e.saturated();v.nextTick(e.process)})):e.idle()&&v.nextTick(function(){"function"===typeof e.drain&&e.drain()})}var e={tasks:[],concurrency:d||1,saturated:l,
empty:l,drain:l,started:!1,paused:!1,push:function(a,b,d){c(a,b,d)},kill:function(){e.drain=l;e.tasks=[]},process:function(){function a(){g--;b.callback&&b.callback.apply(b,arguments);"function"===typeof e.drain&&e.idle()&&e.drain();e.process()}if(!(e.paused||g>=e.concurrency)&&e.length()){var b=e.tasks.shift();"function"!==typeof e.empty||e.length()||e.empty();g++;(e._thisArg?e._worker.bind(e._thisArg):e._worker)(b.task,w(a))}},length:function(){return e.tasks.length},running:function(){return g},
idle:function(){return 0===e.length()+g},pause:function(){e.paused=!0},resume:function(){!1!==e.paused&&(e.paused=!1,z(e.concurrency,function(){v.setImmediate(e.process)}))},_worker:b,_thisArg:a},g=0;return e}function na(b,d,a,c){function e(c){var d=!1;return function(l,p){if(d)throw Error("Callback was already called.");d=!0;g[c]=p;if(l)return a(l);if(++f===b)return a(void 0,g);h(f,e(f))}}a=a||l;if(!Number.isFinite(b)||1>b)return a(void 0,[]);var g=Array(b),f=0,h=c?d.bind(c):d;h(f,e(f))}function T(b){function d(a){if(D[typeof console])if(a)console.error&&
console.error(a);else if(console[b]){var c=y(arguments,1);t(c,function(a){console[b](a)})}}return function(a){var b=y(arguments,1);b.push(d);a.apply(null,b)}}function r(b,d){this._emitter=b||ja;this._limit=d||4;this._events={}}function oa(b){b=b||l;if(b.ONCE===U)return b;var d=function(a){if(b.length)return b(a);b();a()};d.func=b;return d}function pa(b){b=b||l;var d=function(a){if(b.length)return b(a);b();a()};d.func=b;d.ONCE=U;return d}var E=this,sa=E&&E.async,l=function(){},D={"function":!0,object:!0},
H,V;(function(){D[typeof process]&&process.nextTick?(H=process.nextTick,V=D[typeof setImmediate]?function(b){setImmediate(b)}:H):V=H=D[typeof setImmediate]?function(b){setImmediate(b)}:function(b){setTimeout(b,0)}})();var v={VERSION:"0.6.5",each:J,eachSeries:K,eachLimit:X,forEach:J,forEachSeries:K,forEachLimit:X,map:Y,mapSeries:aa,mapLimit:ba,mapValues:function(b,d,a,c){function e(b){var c=!1;return function(d,e){if(c)throw Error("Callback was already called.");c=!0;f[b]=e;d?(a(d,B(f)),a=l):++k===
g&&(a(void 0,f),a=l)}}a=a||l;var g,f={},h=0,k=0,m=c?d.bind(c):d;if(Array.isArray(b)){g=b.length;if(!g)return a(void 0,f);d=function(b){m(b,e(h++))};t(b,d)}else if(b&&"object"===typeof b){var n=Object.keys(b);g=n.length;if(!g)return a(void 0,f);d=function(b){m(b,e(n[h++]))};u(b,d,n)}else a(void 0,f)},mapValuesSeries:function(b,d,a,c){function e(b){var c=!1;return function(d,e){if(c)throw Error("Callback was already called.");c=!0;h[b]=e;d?(a(d,B(h)),a=l):++k===g?(a(void 0,h),a=l):f()}}a=a||l;var g,
f,h={},k=0,m=c?d.bind(c):d;if(Array.isArray(b)){g=b.length;if(!g)return a(void 0,{});f=function(){m(b[k],e(k))}}else if(b&&"object"===typeof b){var n=Object.keys(b);g=n.length;if(!g)return a(void 0,{});f=function(){var a=n[k];m(b[a],e(a))}}else return a(void 0,{});f()},mapValuesLimit:function(b,d,a,c,e){function g(b){var a=!1;return function(d,e){if(a)throw Error("Callback was already called.");a=!0;k[b]=e;d?(c(d,B(k)),c=l):++n===f?(c(void 0,k),c=l):h()}}c=c||l;if(isNaN(d)||1>d)return c(void 0,[]);
var f,h,k={},m=0,n=0,p=e?a.bind(e):a;if(Array.isArray(b)){f=b.length;if(!f)return c(void 0,k);h=function(){var a=m++;a>=f||p(b[a],g(a))}}else if(b&&"object"===typeof b){var q=Object.keys(b);f=q.length;if(!f)return c(void 0,k);h=function(){var a=m++;a>=f||(a=q[a],p(b[a],g(a)))}}else return c(void 0,k);z(d>f?f:d,h)},filter:ca,filterSeries:da,filterLimit:ea,select:ca,selectSeries:da,selectLimit:ea,reject:function(b,d,a,c){b&&"object"===typeof b&&(b=x(b));L(b,d,a,c,!0)},rejectSeries:function(b,d,a,c){b&&
"object"===typeof b&&(b=x(b));M(b,d,a,c,!0)},rejectLimit:function(b,d,a,c,e){b&&"object"===typeof b&&(b=x(b));N(b,d,a,c,e,!0)},detect:O,detectSeries:P,detectLimit:Q,pick:L,pickSeries:M,pickLimit:N,reduce:G,inject:G,foldl:G,reduceRight:fa,foldr:fa,transform:function(b,d,a,c,e){function g(a,b){p(m,a,b,w(f))}function f(b,c){b?(a(b,k?A(m):B(m)),a=l):!1===c?(a(void 0,k?A(m):B(m)),a=l):++n===h&&(a(void 0,m),a=l)}a=a||l;var h,k=Array.isArray(b),m=void 0!==c?c:k?[]:{},n=0,p=e?d.bind(e):d;if(k){h=b.length;
if(!h)return a(void 0,m);t(b,g)}else if(b&&"object"===typeof b){d=Object.keys(b);h=d.length;if(!h)return a(void 0,m);u(b,g,d)}else a(void 0,m)},transformSeries:function(b,d,a,c,e){function g(b,c){if(k)throw Error("Callback was already called.");k=!0;if(b)return a(b,n);if(!1===c||++p===f)return a(void 0,n);h()}a=a||l;var f,h,k,m=Array.isArray(b),n=void 0!==c?c:m?[]:{},p=0,q=e?d.bind(e):d;if(m){f=b.length;if(!f)return a(void 0,n);h=function(){k=!1;q(n,b[p],p,g)}}else if(b&&"object"===typeof b){var C=
Object.keys(b);f=C.length;if(!f)return a(void 0,n);h=function(){k=!1;var a=C[p];q(n,b[a],a,g)}}else return a(void 0,n);h()},transformLimit:function(b,d,a,c,e,g){function f(a,b){a?(c(a,h?A(k):B(k)),c=l):!1===b?(c(void 0,h?A(k):B(k)),c=l):++q===m?(c(void 0,k),c=l):n()}c=c||l;var h=Array.isArray(b),k=void 0!==e?e:h?[]:{};if(isNaN(d)||1>d)return c(void 0,k);var m,n,p=0,q=0,C=g?a.bind(g):a;if(h){m=b.length;if(!m)return c(void 0,k);n=function(){var a=p++;a>=m||C(k,b[a],a,w(f))}}else if(b&&"object"===typeof b){var r=
Object.keys(b);m=r.length;if(!m)return c(void 0,k);n=function(){var a=p++;a>=m||(a=r[a],C(k,b[a],a,w(f)))}}else return c(void 0,k);z(d>m?m:d,n)},sortBy:R(),sortBySeries:R("series"),sortByLimit:R("limit"),some:ga,someSeries:function(b,d,a,c){P(b,d,function(b){a=a||l;a(!!b)},c)},someLimit:function(b,d,a,c,e){Q(b,d,a,function(a){c=c||l;c(!!a)},e)},any:ga,every:ha,all:ha,everySeries:function(b,d,a,c){P(b,d,function(b){a=a||l;a(!b)},c,!0)},everyLimit:function(b,d,a,c,e){Q(b,d,a,function(a){c=c||l;c(!a)},
e,!0)},concat:function(b,d,a,c){function e(a){m(a,w(g))}function g(b,c){c&&Array.prototype.push.apply(h,Array.isArray(c)?c:[c]);b?(a(b,A(h)),a=l):++k===f&&(a(void 0,h),a=l)}a=a||l;var f,h=[],k=0,m=c?d.bind(c):d;if(Array.isArray(b)){f=b.length;if(!f)return a(void 0,h);t(b,e)}else if(b&&"object"===typeof b){d=Object.keys(b);f=d.length;if(!f)return a(void 0,h);u(b,e,d)}else a(void 0,h)},concatSeries:function(b,d,a,c){function e(b,c){if(h)throw Error("Callback was already called.");h=!0;c&&Array.prototype.push.apply(k,
Array.isArray(c)?c:[c]);if(b)return a(b,k);if(++m===g)return a(void 0,k);f()}a=a||l;var g,f,h,k=[],m=0,n=c?d.bind(c):d;if(Array.isArray(b)){g=b.length;if(!g)return a(void 0,k);f=function(){h=!1;n(b[m],e)}}else if(b&&"object"===typeof b){var p=Object.keys(b);g=p.length;if(!g)return a(void 0,k);f=function(){h=!1;n(b[p[m]],e)}}else return a(void 0,k);f()},concatLimit:function(b,d,a,c,e){function g(a,b){b&&Array.prototype.push.apply(f,Array.isArray(b)?b:[b]);a?(c(a,f),c=l):++n===h?(c(void 0,f),c=l):k()}
c=c||l;var f=[];if(isNaN(d)||1>d)return c(void 0,f);var h,k,m=0,n=0,p=e?a.bind(e):a;if(Array.isArray(b)){h=b.length;if(!h)return c(void 0,f);k=function(){var a=m++;a>=h||p(b[a],w(g))}}else if(b&&"object"===typeof b){var q=Object.keys(b);h=q.length;if(!h)return c(void 0,f);k=function(){var a=m++;a>=h||p(b[q[a]],w(g))}}else return c(void 0,f);z(d>h?h:d,k)},parallel:ia,series:ja,parallelLimit:S,waterfall:function(b,d){function a(e,g){function f(b){if(b)return d(b);var f=y(arguments,1);if(e===c)return f.unshift(void 0),
d.apply(null,f);v.nextTick(function(){a(e,f)})}var h=b[e++];switch(g.length){case 0:return h(f);case 1:return h(g[0],f);case 2:return h(g[0],g[1],f);case 3:return h(g[0],g[1],g[2],f);case 4:return h(g[0],g[1],g[2],g[3],f);case 5:return h(g[0],g[1],g[2],g[3],g[4],f);default:return g.push(f),h.apply(null,g)}}d=d||l;if(!Array.isArray(b))return d(Error("First argument to waterfall must be an array of functions"));var c=b.length;if(!c)return d();a(0,[])},whilst:function(b,d,a,c){function e(){b()?g(function(b){if(b)return a(b);
e()}):a()}a=a||l;var g=c?d.bind(c):d;e()},doWhilst:function(b,d,a,c){function e(){g(function(b){if(b)return a(b);var g=y(arguments,1);d.apply(c,g)?e():a()})}a=a||l;var g=c?b.bind(c):b;e()},until:function(b,d,a,c){function e(){b()?a():g(function(b){if(b)return a(b);e()})}a=a||l;var g=c?d.bind(c):d;e()},doUntil:function(b,d,a,c){function e(){g(function(b){if(b)return a(b);var g=y(arguments,1);d.apply(c,g)?a():e()})}a=a||l;var g=c?b.bind(c):b;e()},forever:function(b,d,a){function c(){e(function(a){if(a)return d(a);
c()})}d=d||l;var e=a?b.bind(a):b;c()},compose:function(){return ka.apply(null,qa(arguments))},seq:ka,applyEach:la(),applyEachSeries:la("series"),queue:function(b,d,a){function c(a,b,c){e.started=!0;var d=Array.isArray(a)?a:[a];void 0!==a&&d.length?(b="function"===typeof b?b:null,t(d,function(a){a={task:a,callback:b};c?e.tasks.unshift(a):e.tasks.push(a);"function"===typeof e.saturated&&e.length()===e.concurrency&&e.saturated();v.nextTick(e.process)})):e.idle()&&v.nextTick(function(){"function"===typeof e.drain&&
e.drain()})}var e=ma(b,d,a);e.unshift=function(a,b){c(a,b,!0)};e.push=function(a,b){c(a,b)};return e},priorityQueue:ma,cargo:function(b,d){var a={tasks:[],payload:d,saturated:l,empty:l,drain:l,drained:!0,push:function(b,c){b=Array.isArray(b)?b:[b];c="function"===typeof c?c:l;t(b,function(b){a.tasks.push({data:b,callback:c});a.drained=!1;"function"===typeof a.saturated&&a.length()===a.payload&&a.saturated()});v.nextTick(a.process)},process:function(){if(!c)if(a.length()){var e="number"===typeof a.payload?
a.tasks.splice(0,d):a.tasks,g=W(e,"data");a.length()||"function"!==typeof a.empty||a.empty();c=!0;b(g,function(){c=!1;var b=arguments;t(e,function(a){a.callback&&a.callback.apply(null,b)});a.process()})}else"function"!==typeof a.drain||a.drained||a.drain(),a.drained=!0},length:function(){return a.tasks.length},running:function(){return c}},c=!1;return a},auto:function(b,d){function a(a){f.unshift(a)}function c(){g--;t(f.slice(0),function(a){a()})}d=d?w(d):l;var e=Object.keys(b),g=e.length;if(!g)return d();
var f=[],h={};a(function(){g||d(void 0,h)});u(b,function(b,e){function g(b){var a=y(arguments,1);1>=a.length&&(a=a[0]);if(b){var f=B(h);f[e]=a;d(b,f);d=l}else h[e]=a,v.nextTick(c)}function p(){return!h.hasOwnProperty(e)&&ra(t,function(a){return h.hasOwnProperty(a)})}function q(){if(p()){var a;a:{a=-1;for(var b=f.length;++a<b;)if(f[a]===q)break a;a=void 0}0<=a&&f.splice(a,1);u(g,h)}}b=Array.isArray(b)?b:[b];var r=b.length,t=b.slice(0,r-1),u=b[r-1];if(p())return u(g,h);a(q)},e)},retry:function(b,d,
a){function c(c,g){a=c||a||l;var f,h;na(b,function(a,c){d(function(d,e){f=d;h=e;if(!d)return c(!0);c(d&&a===b-1)},g)},function(){a(f,h)})}"function"===typeof b&&(a=d,d=b,b=5);b=parseInt(b,10)||5;return"function"===typeof a?c():c},iterator:function(b){function d(e){var g=function(){a&&b[c[e]||e].apply(null,arguments);return g.next()};g.next=function(){return e<a-1?d(e+1):null};return g}var a=0,c=[];Array.isArray(b)?a=b.length:(c=Object.keys(b),a=c.length);return d(0)},apply:function(b){var d=y(arguments,
1);return function(){return b.apply(this,Array.prototype.concat.apply(d,F(arguments)))}},nextTick:H,setImmediate:V,times:function(b,d,a,c){function e(c){var d=!1;return function(e,h){if(d)throw Error("Callback was already called.");d=!0;g[c]=h;e?(a(e),a=l):++f===b&&(a(void 0,g),a=l)}}a=a||l;if(!Number.isFinite(b)||1>b)return a(void 0,[]);var g=Array(b),f=0,h=c?d.bind(c):d;z(b,function(a){h(a,e(a))})},timesSeries:na,timesLimit:function(b,d,a,c,e){function g(a){var e=!1;return function(g,m){if(e)throw Error("Callback was already called.");
e=!0;f[a]=m;g?(c(g),c=l):++h===b?(c(void 0,f),c=l):h>=k+d&&(k=h,n())}}c=c||l;if(!Number.isFinite(b)||1>b)return c(void 0,[]);var f=Array(b),h=0,k=0,m=e?a.bind(e):a;d=d>b?b:d;var n=function(){z(d,function(a){a=k+a;a>=b||m(a,g(a))})};n()},memoize:function(b,d,a){d=d||function(a){return a};var c={},e={},g=function(){function f(){var b=F(arguments);c[l]=b;var d=e[l];delete e[l];for(var f=-1,g=d.length;++f<g;)d[f].apply(a,b)}var g=F(arguments),k=g.pop(),l=d.apply(null,g);if(c.hasOwnProperty(l))v.nextTick(function(){k.apply(a,
c[l])});else{if(e.hasOwnProperty(l))return e[l].push(k);e[l]=[k];g.push(f);b.apply(a,g)}};g.memo=c;g.unmemoized=b;return g},unmemoize:function(b){return function(){return(b.unmemoized||b).apply(null,arguments)}},log:T("log"),dir:T("dir"),createLogger:T,noConflict:function(){E.async=sa;return v},eventEmitter:function(b){b=b||{};var d=b.limit;return b.parallel&&!d?new r(ia):b.parallel||b.parallelLimit?new r(S,d):new r(b.emitter)},EventEmitter:r};D[typeof define]&&define&&define.amd?define([],function(){return v}):
D[typeof module]&&module&&module.exports?module.exports=v:E&&D[typeof E.async]?E.neo_async=v:E.async=v;var U={__ONCE__:!0};r.prototype.getListeners=function(b){function d(a){a=a||[];var b=Array(a.length);t(a,function(a,c){b[c]=a.func});return b}var a=this._events;if(b)return d(a[b]);var c={};u(a,function(a,b){c[b]=d(a)});return c};r.prototype.addListener=function d(a,c){var e=this;if("object"===typeof a)return u(a,function(a,c){d.call(e,c,a)}),e;e._events[a]=e._events[a]||[];Array.isArray(c)?t(c,
function(c){e._events[a].push(oa(c))}):e._events[a].push(oa(c));return e};r.prototype.addOnceListener=function a(c,e){var g=this;if("object"===typeof c)return u(c,function(c,e){a.call(g,e,c)}),g;Array.isArray(e)?t(e,function(a,c){e[c]=pa(a)}):e=pa(e);return g.addListener(c,e)};r.prototype.removeListener=function c(e,g){var f=this;if("object"===typeof e)return u(e,function(e,g){c.call(f,g,e)}),f;var h=f._events[e]||[];if(!h.length)return f;if(Array.isArray(g))return I(g,function(g){c.call(f,g,e)}),
f;I(h,function(c,e){c.func===g&&h.splice(e,1)});return f};r.prototype.removeEvent=function(c){c?(this._events[c]||[]).length&&delete this._events[c]:this._events={};return this};r.prototype.emit=function(c,e,g){function f(c,f){if(c)return e(c);I(h,function(c,e){c.ONCE===U&&h.splice(e,1)});e(void 0,f)}e=e||l;var h=this._events[c]||[];if(!h.length)return e(),this;c=this._emitter;c=g?c.bind(g):c;c===S?c(h,this._limit,f):c(h,f);return this};r.prototype.on=r.prototype.addListener;r.prototype.once=r.prototype.addOnceListener;
r.prototype.off=r.prototype.removeListener;r.prototype.removeAllListener=r.prototype.removeEvent;r.prototype.trigger=r.prototype.emit}).call(this);
